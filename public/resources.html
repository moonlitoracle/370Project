<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Learning Resources</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <header>
        <nav>
            <div class="logo">CareerRoadmap</div>
            <ul>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="careers.html">Careers</a></li>
                <li><a href="resources.html">Resources</a></li>
                <li><a href="#" id="logoutBtn">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h1>Learning Resources</h1>
        <div id="resourceList"></div>
    </main>

    <script src="js/app.js"></script>
    <script>
        async function checkAuth() {
            const res = await Auth.checkSession();
            if (res.status !== 'success') UI.redirect('login.html');
        }

        async function loadResources() {
            const res = await Resources.list();
            if (res.status === 'success') {
                const box = document.getElementById('resourceList');
                box.innerHTML = '';

                res.data.forEach(r => {
                    box.innerHTML += `
                <div class="card">
                    <h3>${r.name}</h3>
                    <p><strong>Skill:</strong> ${r.skill}</p>
                    <p><strong>Type:</strong> ${r.type}</p>
                    <a href="${r.url}" target="_blank" class="btn">Open Resource</a>
                </div>
            `;
                });
            }
        }

        document.getElementById('logoutBtn').onclick = async e => {
            e.preventDefault();
            await Auth.logout();
            UI.redirect('index.html');
        };

        (async () => {
            await checkAuth();
            await loadResources();
        })();
    </script>

</body>

</html>